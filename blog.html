<!DOCTYPE html>
<html>
<head>
  <title>Blogging Application</title>
  <style>
     * {
    padding: 0;
    margin: 0;
    /*box-size:border-box;*/
}
body {
    background: white;
    border: 30px solid black;
    box-sizing: border-box;
}
#container {
    width: 300px;
    margin: 0 auto;
    margin-top: 150px;
}
#blogSection{
  width : 30%;
        margin-left : auto;
        margin-right :auto ;
        border : solid black thin;
        padding :2em;
        background:#00bcd4;
        color :black;
        font-size:.8rem;
        text-align:center;
}
.tabs {
    display: table-cell;
    width: 30%;
    background-color: rgba(11, 177, 224, 0.82);
    padding: 10px;
    float: left;
    text-align: center;
    vertical-align: middle;
    border: 2px solid #ffffff;
    border-bottom: 0px;
    position: relative;
    margin-left: 8%;
    font-size: 1.3em;
    color: #ffffff;
}
.tabs:hover, p{
    cursor: pointer;
}

#lt {
    background-color: rgb(12, 132, 189);
}
#cont {
    width: 100%;
    height: 270px;
    background-color: #00bcd4;
    border: 2px solid #ffffff;
}

input{
    display: block;
    width: 250px;
    margin: 10px 15px;
    padding: 4px;
    font-size: 1.3em;
    color: rgba(11, 177, 224, 0.82);
    outline: 2px solid #ffffff;
}
input#blogTitle{
    display: block;
    width: 250px;
    margin-bottom: 20%;
    margin: 10px 51px;
    padding: 4px;
    font-size: 1.3em;
    color: rgba(11, 177, 224, 0.82);
    outline: 2px solid #ffffff;
}

input[type="submit"] {
    width: 272px;
    color: #6e6e6e;
}

#clear {
    clear: both;
}

.comm {
    position: absolute;
    visibility: hidden;
}
#login {
    visibility: visible;
}

h3 {
    display: table-cell;
    vertical-align: middle;
    padding: 10px 116px;
    font-size: 1.5em;
    color: white;
}
#blogs {
    display: table-cell;
    vertical-align: middle;
    padding: 10px 25px;
    margin-left: 10%;
    font-size: 1.5em;
    color: #1f45e4;
}
#forgot h3 {
    display: block;
    margin-top: 30px;
    text-align: center;
}

#forgot div {
    margin-top: 30px;
}
p {
    padding: 10px 15px;
    font-size: 1.3em;
    color: #1f45e4;
}
  </style>
</head>
<body >
  <center><h1 id="x1"> Blogging App</h1></center>
  <!-- <div id="loginForm">
    <h3>Log in</h3>
    <input type="text" id="username" placeholder="Username" required><br><br>
    <input type="password" id="password" placeholder="Password" required><br><br>
    <button onclick="login()">Login</button>
    <button onclick="showRegistrationForm()">Register</button>
  </div>
  <div id="registrationForm" style="display: none;">
    <h3>Register</h3>
    <input type="text" id="regUsername" placeholder="Username" required><br><br>
    <input type="password" id="regPassword" placeholder="Password" required><br><br>
    <input type="password" id="rrp" placeholder="Re write Password" required/><br><br>
    <button onclick="register()">Register</button>
    <button onclick="showLoginForm()">Back to Login</button>
  </div> -->
  <div id="container">
    <div id="tabs">
        <p id="lt" class="tabs" onclick="loginTabFun()">Log in</p>
        <p id="rt" class="tabs" onclick="regTabFun()">Register</p>

        <div id="clear"></div>
    </div>

    <div id="cont">
        <div id="login" class="comm">
            <h3>Sign in</h3>

            <input id="se" type="email" placeholder="Email" required/>
            <input id="sp" type="password" placeholder="Password" required/>
            <input type="submit" onclick="login()" value="Submit"/>

            <!-- <p onclick="forTabFun()">Forget Password?</p> -->
        </div>
        <div id="register" class="comm">
            <h3>Register</h3>

            <input id="re" type="email" placeholder="Email" required/>
            <input id="rp" type="password" placeholder="Password" required/>
            <input id="rrp" type="password" placeholder="Re write Password" required/>
            <input type="submit" onclick="register()" value="Submit"/>

        </div >
      <!--  <div id="forgot" class="comm">
        <h3>Forgot Password</h3>
        <div>
            <input id="fe" type="email" placeholder="Email" required/>
            <input type="submit" onclick="forgot()" value="Submit"/>
        </div>
        </div> -->
    </div>
</div>
  <center>  <div id="blogSection" style="display: none;">
    <h2>My Blogs</h2>
    <!-- <form id="createBlogForm" style="display:none;"> -->
        <select id="blogCategory">
          <option value="music">Music</option>
            <option value="sports">Sports</option>
            <option value="technology">Technology</option>
            <option value="food">Food</option>
            <option value="env">Environment</option>
        </select><br><br>
        <input type="text" id="blogTitle" placeholder="Title" required><br><br>
        <textarea  rows="10" cols="30" id="blogContent" placeholder="Content" required></textarea><br><br>
    <!-- </form> -->
    <button onclick="createBlog()">Create New Blog</button><br><br>
    <div id="blogs"></div><br><br>
    <button onclick="logout()">Logout</button>
  </div>
</center>

  <script>

var emailArray=[];
var passwordArray=[];
const blogs = [];
var loginBox = document.getElementById("login");
var regBox = document.getElementById("register");
var forgetBox = document.getElementById("forgot");

var loginTab = document.getElementById("lt");
var regTab = document.getElementById("rt");

function regTabFun(){
    event.preventDefault();

    regBox.style.visibility="visible";
    loginBox.style.visibility="hidden";
    // forgetBox.style.visibility="hidden";

    regTab.style.backgroundColor="rgb(12, 132, 189)";
    loginTab.style.backgroundColor="rgba(11, 177, 224, 0.82)";
}
function loginTabFun(){
    event.preventDefault();

    regBox.style.visibility="hidden";
    loginBox.style.visibility="visible";
   // forgetBox.style.visibility="hidden";

    loginTab.style.backgroundColor="rgb(12, 132, 189)";
    regTab.style.backgroundColor="rgba(11, 177, 224, 0.82)";
}
function forTabFun(){
    event.preventDefault();

    regBox.style.visibility="hidden";
    loginBox.style.visibility="hidden";
    // forgetBox.style.visibility="visible";

    regTab.style.backgroundColor="rgba(11, 177, 224, 0.82)";
    loginTab.style.backgroundColor="rgba(11, 177, 224, 0.82)";

}


function register(){
    event.preventDefault();

    var email = document.getElementById("re").value;
    var password = document.getElementById("rp").value;
    var passwordRetype = document.getElementById("rrp").value;

    if (email == ""){
        alert("Email required.");
        return ;
    }
    else if (password == ""){
        alert("Password required.");
        return ;
    }
    else if (passwordRetype == ""){
        alert("Password required.");
        return ;
    }
    else if ( password != passwordRetype ){
        alert("Password don't match retype your Password.");
        return;
    }
    else if(emailArray.indexOf(email) == -1){
        emailArray.push(email);
        passwordArray.push(password);

        alert(email + "  Thanks for registration. \nTry to login Now");

        document.getElementById("re").value ="";
        document.getElementById("rp").value="";
        document.getElementById("rrp").value="";
    }
    else{
        alert(email + " is already register.");
        return ;
    }
}
function login(){
    event.preventDefault();

    var email = document.getElementById("se").value;
    var password = document.getElementById("sp").value;

    var i = emailArray.indexOf(email);

    if(emailArray.indexOf(email) == -1){
        if (email == ""){
            alert("Email required.");
            return ;
        }
        alert("Email does not exist.");
        return ;
    }
    else if(passwordArray[i] != password){
        if (password == ""){
            alert("Password required.");
            return ;
        }
        alert("Password does not match.");
        return ;
    }
    else {
        alert(email + " yor are login Now \n welcome to our website.");
        showBlogSection();
        document.getElementById("se").value ="";
        document.getElementById("sp").value="";
        return ;
    }
//.?
}
var currentUser;
function logout() {
  if (currentUser !== null) {
    currentUser = null;
    document.getElementById('container').style.display = 'block';
    document.getElementById('x1').style.display = 'none';
    document.getElementById('blogSection').style.display = 'none';
  }
}
// function forgot(){
//     event.preventDefault();

//     var email = document.getElementById("fe").value;

//     if(emailArray.indexOf(email) == -1){
//         if (email == ""){
//             alert("Email required.");
//             return ;
//         }
//         alert("Email does not exist.");
//         return ;
//     }

//     alert("email is send to your email check it in 24hr. \n Thanks");
//     document.getElementById("fe").value ="";
// }
function showBlogSection() {
  document.getElementById("container").style.display = "none";
  document.getElementById("blogSection").style.display = "block";
  renderBlogs();
}

function createBlog() {
    const title = document.getElementById('blogTitle').value;
            const content = document.getElementById('blogContent').value;
            const category = document.getElementById('blogCategory').value;
            blogs.push({ title, content, category });
           // updateBlogList();
            
            document.getElementById('blogTitle').value = '';
            document.getElementById('blogContent').value = '';
           // document.getElementById('blogCategory').selectedIndex= 'default';
            renderBlogs();
}

function updateBlog(index) {
    const blogDiv = document.getElementById(`blog_${index}`);
    const contentElement = blogDiv.querySelector(".content");
    
    const updateForm = document.createElement("div");
    updateForm.innerHTML = `
      <textarea id="updateContent_${index}" rows="10" cols="30">${blogs[index].content}</textarea><br>
      <button onclick="saveUpdatedContent(${index})">Save</button><hr>
      <button onclick="cancelUpdate(${index})">Cancel</button><br> `;
    blogDiv.replaceChild(updateForm, contentElement);
  }
  function saveUpdatedContent(index) {
    const updatedContent = document.getElementById(`updateContent_${index}`).value;
    blogs[index].content = updatedContent;
    renderBlogs();
  }
  
  function cancelUpdate(index) {
    renderBlogs();
  }

function deleteBlog(index) {
  if (confirm("Are you sure you want to delete this blog?")) {
    blogs.splice(index, 1);
    renderBlogs();
  }
}
function renderBlogs() {
    const blogsDiv = document.getElementById("blogs");
    blogsDiv.innerHTML = "";
    for (let i = 0; i < blogs.length; i++) {
      const blogDiv = document.createElement("div");
      blogDiv.id = `blog_${i}`;
      blogDiv.innerHTML = `
        <h3>${blogs[i].title}</h3>
        <p class="content">${blogs[i].content}</p>
        <button onclick="updateBlog(${i})">Update</button>
        <button onclick="deleteBlog(${i})">Delete</button>`;
      blogsDiv.appendChild(blogDiv);
    }
  }
  </script>
</body>
</html>